# 테스팅 리뷰 - 탑 다운 실행

테스트가 균형 잡히고 목적이 있으며 개발 목표에 부합하는지 확인하기 위해 프로젝트의 테스트 전략에 대한 테스트 구현을 분석합니다.

## 필수 조건 확인

**먼저**, 테스팅 전략 문서가 있는지 확인:
- CHECK: `.moonklabs/01_PROJECT_DOCS/TESTING_STRATEGY.md` 확인
- 찾을 수 없으면 사용자에게 알림: "테스팅 전략 문서를 찾을 수 없습니다. 하나를 만드는 것을 도와드릴까요, 아니면 일반적인 테스트 품질 리뷰로 진행할까요?"
- 사용자가 전략 없이 진행하고 싶어하면 일반적인 테스트 품질 원칙에 초점을 맞춘 리뷰로 조정

## 정확히 다음 7개 항목으로 TODO 생성

1. 테스팅 전략 문서 로드 (또는 리뷰 기준 정의)
2. 테스트 구현 구조 분석
3. 테스트-코드 정렬 평가
4. 잘못 정렬되거나 불필요한 테스트 식별
5. 중요 기능 커버리지 평가
6. 수정 권장사항 생성
7. 정렬 보고서 작성

각 단계에 대한 다음 지침을 단계별로 따르고 엄격히 준수하세요.

## 모든 TODO 항목의 세부사항

### 1. 테스팅 전략 문서 로드 (또는 리뷰 기준 정의)

**옵션 A - 전략 문서가 존재하는 경우:**
- LOAD: `.moonklabs/01_PROJECT_DOCS/TESTING_STRATEGY.md` 로드
- EXTRACT: 핵심 원칙과 우선순위 추출
- IDENTIFY: 테스트해야 할 것과 하지 말아야 할 것 식별
- NOTE: 커버리지 기대치와 품질 게이트 메모
- UNDERSTAND: 테스팅 철학 이해

**옵션 B - 전략 문서가 없는 경우:** 리뷰 기준으로 일반적인 모범 사례 사용:
- 테스트는 구현이 아닌 동작에 초점을 맞춰야 함
- 중요한 경로는 반드시 커버리지가 있어야 함
- 테스트는 유지보수 가능하고 명확해야 함
- 간단한 getter/setter의 과도한 테스트 피하기
- 커버리지와 유지보수 부담 간의 균형

이 리뷰에 사용되는 접근법을 **문서화**하세요.

### 2. 테스트 구현 구조 분석

현재 테스트 코드베이스를 **검토**:

- USE: test.md 명령을 사용하여 테스트 실행
- EXPLORE: 테스트 디렉토리 구조와 조직 탐색
- IDENTIFY: 테스트 범주와 그들의 목적 식별
- CHECK: 테스트 명명 규칙과 패턴 확인
- NOTE: 테스트 인프라나 유틸리티 메모

**개수를 세는 것이 아니라 존재하는 것을 이해하는 데 집중하세요.**

### 3. 테스트-코드 정렬 평가

실제 구현과 테스트를 **비교**:

- 각 주요 컴포넌트에 대해 테스트가 기능과 일치하는지 확인
- IDENTIFY: 동작 vs 구현 세부사항을 테스트하는 테스트 식별
- FIND: 과도한 설정이나 모킹이 있는 테스트 찾기
- LOCATE: 리팩토링 시 자주 깨지는 테스트 위치 파악
- CHECK: 테스트 복잡성이 코드 복잡성과 일치하는지 확인

**핵심 질문:** 테스트가 사용자가 관심 있는 것을 검증하는가?

### 4. 잘못 정렬되거나 불필요한 테스트 식별

가치를 제공하지 않는 테스트를 **검색**:

**전략 문서를 사용하는 경우:**
- 전략에서 "건너뛰기"로 표시된 영역의 테스트
- 정의된 범위 밖의 테스트
- 전략 가이드라인에 따른 과도하게 명세된 테스트

**일반 원칙을 사용하는 경우:**
- 간단한 기능에 대한 과도하게 엔지니어링된 테스트
- 모든 리팩터에서 깨지는 테스트
- 중요하지 않은 기능의 엣지 케이스 테스트
- 과도한 모킹/설정이 있는 테스트
- 성능 요구사항 없는 성능 테스트

**수정하거나 제거할 특정 테스트 목록을 작성하세요.**

### 5. 중요 기능 커버리지 평가

필수 기능이 적절한 테스트를 가지고 있는지 **확인**:

**전략 문서를 사용하는 경우:**
- CHECK: 전략에서 정의된 높은 우선순위 영역의 커버리지 확인
- VERIFY: 전략별 요구사항이 테스트되는지 확인

**모든 리뷰에 대해:**
- IDENTIFY: 중요한 경로 테스팅의 격차 식별
- CHECK: 해당되는 경우 인증/권한 부여 확인
- VERIFY: 중요한 작업의 오류 처리 확인
- ENSURE: 필요한 곳에 데이터 무결성 테스트가 있는지 확인
- CONFIRM: 통합 지점이 테스트되는지 확인

**해결이 필요한 특정 격차를 메모하세요.**

### 6. 수정 권장사항 생성

구체적이고 실행 가능한 권장사항을 **생성**:

각 발견사항에 대해:
- SPECIFY: 테스트 파일과 함수를 명시
- EXPLAIN: 수정이 필요한 이유 설명
- SUGGEST: 특정 변경사항 제안 (제거, 단순화, 추가)
- PROVIDE: 도움이 된다면 개선된 접근법의 예제 제공

**형식:**
```
파일: tests/test_example.py::test_function_name
문제: [무엇이 잘못되었는지]
행동: [무엇을 해야 하는지]
이유: [이것이 전략과 어떻게 일치하는지]
```

### 7. 정렬 보고서 작성

테스트-전략 정렬에 대한 집중된 보고서를 **생성**:

- 시스템 날짜 명령을 사용하여 현재 타임스탬프 가져오기
- `.moonklabs/10_STATE_OF_PROJECT/YYYY-MM-DD-HH-MM-test-alignment.md`에 보고서 생성

**보고서 구조:**
```markdown
# 테스트-전략 정렬 리뷰 - [YYYY-MM-DD HH:MM]

## 정렬 요약

테스팅 전략과의 전체 정렬: [EXCELLENT | GOOD | NEEDS WORK | POOR]

주요 발견사항:
- [테스트 스위트 건강에 대한 주요 발견사항]
- [커버리지에 대한 주요 발견사항]
- [유지보수 부담에 대한 주요 발견사항]

## 수정이 필요한 테스트

### 제거 (과도하게 엔지니어링됨/범위 밖)
[이유와 함께 특정 테스트 목록]

### 단순화 (목적에 비해 너무 복잡함)
[단순화 접근법과 함께 특정 테스트 목록]

### 추가 (중요한 격차)
[중요한 경로를 위한 특정 누락된 테스트 목록]

## 권장 조치

### 즉시 (차단 문제)
- [ ] [파일/테스트 참조가 있는 특정 조치]

### 단기 (품질 개선)
- [ ] [파일/테스트 참조가 있는 특정 조치]

### 장기 (기술 부채)
- [ ] [파일/테스트 참조가 있는 특정 조치]

## 테스트 건강 지표

- 테스트가 코드 목적과 일치: [YES | PARTIALLY | NO]
- 중요한 경로가 커버됨: [YES | PARTIALLY | NO]
- 유지보수 부담이 합리적: [YES | PARTIALLY | NO]
- 테스트가 개발 속도를 지원: [YES | PARTIALLY | NO]

## 구현 예제

[필요한 경우, 테스트 개선의 전/후 예제 표시]

## 다음 리뷰

권장 리뷰 시기: [X 주/스프린트]
다음 리뷰의 초점 영역: [모니터링할 특정 영역]
```

**IMPORTANT:** 지표가 아닌 정렬과 균형에 집중하세요. 프로젝트의 실제 요구 사항을 충족하는 테스트가 목표입니다.