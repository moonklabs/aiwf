# 스프린트에 태스크 추가

기존 스프린트에 새로운 개별 태스크를 추가합니다.

## 사용법

```
/aiwf:add_task_to_sprint <스프린트ID> <태스크 제목>
```

예시:
- `/aiwf:add_task_to_sprint S03 "API 성능 최적화"`
- `/aiwf:add_task_to_sprint S03 "데이터베이스 인덱스 추가"`

## 정확히 다음 12개 항목으로 TODO 생성

1. 인수 분석 및 검증
2. 대상 스프린트 존재 확인
3. 스프린트 컨텍스트 및 목표 심층 분석
4. 태스크 적합성 평가 및 사용자 확인
5. 기존 태스크 목록 확인 및 중복 검사
6. 다음 태스크 번호 결정
7. 태스크 상세 내용 작성
8. 태스크 파일 생성
9. 스프린트 메타 파일 업데이트
10. 프로젝트 매니페스트 업데이트
11. Git 상태 확인
12. 최종 보고 및 다음 단계 안내

## 모든 TODO 항목에 대한 세부사항

### 1. 인수 분석 및 검증

입력 형식: `<스프린트ID> <태스크 제목>`

**검증 항목:**
- 스프린트 ID가 제공되었는지 확인 (예: S01, S02, S03)
- 태스크 제목이 제공되었는지 확인
- 태스크 제목이 따옴표로 묶여있다면 제거
- 비어있는 경우 사용자에게 올바른 형식 요청

### 2. 대상 스프린트 존재 확인

**확인 단계:**
- `.aiwf/03_SPRINTS/` 디렉토리에서 해당 스프린트 폴더 확인
- 스프린트 메타 파일 존재 확인 (`S##_M##_sprint_meta.md`)
- 스프린트 상태 확인 (completed가 아닌지)
- 존재하지 않으면 오류 메시지와 함께 중단

### 3. 스프린트 컨텍스트 및 목표 심층 분석

**병렬 서브에이전트**를 사용하여 다음 내용을 상세히 분석:

1. **스프린트 메타 파일 완전 분석**
   - 스프린트 목표 및 범위 파악
   - 예상 결과물(Deliverables) 확인
   - 스프린트 성공 기준 이해
   - 현재 진행 상황 및 남은 작업 파악

2. **마일스톤 컨텍스트 확인**
   - 관련 마일스톤 파일에서 상위 목표 확인
   - 마일스톤 성공 기준과의 정렬성 검토
   - 다른 스프린트와의 연관성 파악

3. **기술적 제약사항 검토**
   - `.aiwf/01_PROJECT_DOCS/ARCHITECTURE.md` 분석
   - `.aiwf/05_ARCHITECTURAL_DECISIONS/` ADR 확인
   - 기존 기술 스택 및 패턴 이해

4. **분석 결과 정리**
   - 스프린트의 핵심 목표 3-5개 도출
   - 허용되는 작업 범위 명확화
   - 제외되어야 할 작업 유형 식별

### 4. 태스크 적합성 평가 및 사용자 확인

**태스크 적합성 심층 평가:**

1. **스프린트 목표와의 정렬성 검사**
   - 제안된 태스크가 스프린트 목표에 직접적으로 기여하는가?
   - 스프린트 범위를 벗어나지 않는가?
   - 마일스톤 목표와 일치하는가?

2. **기존 태스크와의 관계 분석**
   - 중복되는 태스크가 있는가?
   - 다른 태스크와 충돌하거나 상충되는가?
   - 선행 태스크가 필요한가?

3. **우선순위 및 복잡도 평가**
   - 현재 스프린트 내에서 완료 가능한가?
   - 다른 태스크보다 우선순위가 높은가?
   - 예상 작업량이 적절한가?

4. **사용자에게 분석 결과 제시**
   ```
   📊 태스크 적합성 분석 결과:
   
   🎯 스프린트 목표: [스프린트 핵심 목표]
   📋 제안된 태스크: [태스크 제목]
   
   ✅ 적합성 평가:
   - 목표 정렬성: [상/중/하] - [이유]
   - 범위 적절성: [적합/경계/벗어남] - [설명]
   - 우선순위: [높음/보통/낮음] - [근거]
   - 예상 복잡도: [낮음/보통/높음]
   
   🔍 관련 태스크:
   - [기존 태스크 목록 중 관련된 것들]
   
   💡 권장사항:
   [태스크 추가를 권장하는지, 수정이 필요한지, 다른 스프린트가 적합한지 등]
   
   계속 진행하시겠습니까? (Y/N)
   ```

5. **사용자 확인 처리**
   - Y: 태스크 추가 진행
   - N: 취소하고 대안 제시
   - 수정 제안 시: 새로운 태스크 제목으로 재평가

### 5. 기존 태스크 목록 확인 및 중복 검사

**상세한 중복 및 충돌 검사:**
- 스프린트 디렉토리 내 모든 태스크 파일 스캔
- 제목 및 내용 기반 유사도 검사
- 기능적 중복 여부 확인
- 관련 태스크 그룹핑 제안

### 6. 다음 태스크 번호 결정

**태스크 번호 할당:**
- 기존 태스크 번호 파악
- 순차적 번호 할당 (T01, T02...)
- 파일명 형식: `T##_S##_<제목_언더스코어>.md`

### 7. 태스크 상세 내용 작성

**스프린트 분석 결과를 바탕으로 태스크 내용 구체화:**

1. **태스크 개요 작성**
   - 스프린트 목표와의 연관성 명시
   - 구체적인 작업 범위 정의
   - 예상 결과물 설명

2. **요구사항 도출**
   - 스프린트 목표에서 파생된 구체적 요구사항
   - 기술적 제약사항 반영
   - 측정 가능한 완료 조건

3. **기술 가이드라인 구체화**
   - 관련 ADR 참조
   - 사용해야 할 기존 패턴/컴포넌트
   - 준수해야 할 코딩 표준

4. **구현 전략 수립**
   - 단계별 구현 접근법
   - 예상되는 기술적 도전과제
   - 리스크 및 대응 방안

### 8. 태스크 파일 생성

**파일 위치:** `.aiwf/03_SPRINTS/S##_M##_<name>/T##_S##_<title>.md`

**내용 포함:**
```markdown
# T##: [태스크 제목]

**스프린트**: S## - [스프린트 이름]
**생성일**: YYYY-MM-DD HH:MM
**상태**: pending
**우선순위**: medium
**예상 시간**: TBD

## 개요
[태스크에 대한 간단한 설명]

## 요구사항
- [ ] [구체적인 요구사항 1]
- [ ] [구체적인 요구사항 2]
- [ ] [구체적인 요구사항 3]

## 승인 기준
- [ ] [완료 조건 1]
- [ ] [완료 조건 2]
- [ ] [완료 조건 3]

## 기술 가이드라인
- [관련 아키텍처 결정 참조]
- [기존 코드베이스 패턴 참조]
- [사용할 기술 스택]

## 구현 노트
- [구현 시 고려사항]
- [잠재적 리스크]
- [테스트 전략]

## 참조
- [관련 문서나 코드 링크]
```

### 9. 스프린트 메타 파일 업데이트

스프린트 메타 파일의 태스크 섹션 업데이트:
- 새로운 태스크를 목록에 추가
- 전체 태스크 수 업데이트
- 진행률은 그대로 유지 (새 태스크는 pending)

### 10. 프로젝트 매니페스트 업데이트

`.aiwf/00_PROJECT_MANIFEST.md` 업데이트:
- "활성 태스크" 섹션에 새 태스크 추가
- 태스크 통계 업데이트
- 최종 업데이트 시간 변경

### 11. Git 상태 확인

**확인 사항:**
- 작업 디렉토리가 깨끗한지 확인
- 새로 생성된 파일 표시
- 수정된 파일 목록 제공

### 12. 최종 보고 및 다음 단계 안내

**상세한 보고서 제공:**
```
✅ 태스크 추가 완료!

📊 태스크 분석 요약:
- 스프린트 정렬성: [평가 결과]
- 우선순위: [설정된 우선순위]
- 예상 복잡도: [복잡도]
- 관련 태스크: [연관 태스크 목록]

📄 생성된 파일: T##_S##_<title>.md
🏃 스프린트: S## - [스프린트 이름]
📋 태스크: T## - [태스크 제목]
⏱️ 상태: pending

📝 다음 단계:
1. 태스크 파일을 열어 생성된 내용 검토
2. 필요시 세부사항 추가 작성
3. `/aiwf:do_task T##`로 작업 시작
4. 완료 후 `/aiwf:update_task_status T## completed` 실행

💡 팁: 
- 태스크 목록 확인: `/aiwf:list_sprint_tasks S##`
- 태스크 상세 보기: `/aiwf:view_task T##`
- 관련 태스크 확인: [관련 태스크 번호들]
```

**출력 형식:**
```
✅ 태스크 추가 완료!

📄 생성된 파일: T##_S##_<title>.md
🏃 스프린트: S## - [스프린트 이름]
📋 태스크: T## - [태스크 제목]
⏱️ 상태: pending

📝 다음 단계:
1. 태스크 파일을 열어 세부사항 작성
2. `/aiwf:do_task T##`로 작업 시작
3. 완료 후 `/aiwf:update_task_status T## completed` 실행

💡 팁: 태스크 목록 확인은 `/aiwf:list_sprint_tasks S##`
```

## 주의사항

- **스프린트 적합성**: 태스크가 스프린트 목표에 부합하는지 반드시 검증
- **중복 방지**: 기존 태스크와의 중복 또는 충돌 확인
- **범위 관리**: 스프린트 범위를 벗어나는 태스크는 다른 스프린트로 안내
- **완료 가능성**: 현재 스프린트 기간 내 완료 가능한 작업인지 평가
- **의존성 확인**: 다른 태스크와의 의존 관계 파악 및 명시
- **품질 기준**: 태스크 설명은 구체적이고 측정 가능해야 함

## 분석 중심 접근법의 이점

1. **목표 정렬**: 모든 태스크가 스프린트 목표에 직접 기여
2. **중복 방지**: 유사하거나 중복된 작업 사전 차단
3. **품질 향상**: 상세한 분석으로 태스크 품질 개선
4. **시간 절약**: 부적절한 태스크로 인한 재작업 방지
5. **투명성**: 태스크 추가 근거와 맥락 명확화