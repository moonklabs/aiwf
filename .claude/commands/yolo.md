# YOLO 모드에서 모든 열린 태스크 실행

이 모드는 사용자 상호작용 없이 실행되도록 만들어졌습니다.
질문을 하거나 확인을 요청하지 **마세요. DO NOT ASK**
의심스러우면 최선의 해결책에 대해 **RESEARCH**하고 **ULTRATHINK**하세요.

**IMPORTANT** 특정 지점에서 멈추지 않으려고 노력하되 신중한 고려 후 필요하다면 그렇게 하세요.

우선순위는 작업을 완료하는 것입니다.

## 모드 선택

<$ARGUMENTS> 확인:

- 스프린트 ID가 제공된 경우 (예: S03): 해당 스프린트에서만 작업
- 비어있는 경우: 일반 태스크를 먼저, 그 다음 활성 스프린트 태스크

**모드를 사용자에게 보고하세요!**

## 안전 가이드라인

- NEVER: 중요한 파일(.env, alembic 마이그레이션, 프로덕션 설정)을 **절대** 수정하지 마세요
- STOP: 데이터베이스 스키마 변경을 만나면 **중지**
- STOP: 5개 이상의 파일을 삭제해야 하면 **중지**
- STOP: 변경 후 테스트가 실패하면 **중지**
- ALWAYS: 태스크 구현 후 **항상** 테스트 실행

## 정확한 프로세스 따르기

이 프로세스를 고수하고 **정확히** 따라야 합니다

시작하기 전에:

- test.md 명령을 사용하여 깨끗한 기준선을 보장하기 위해 테스트 실행 (@.claude/commands/moonklabs/test.md)
- **만약** 실패율이 10%를 넘으면 수정이 가능한지 평가. 가능하면 수정하고 계속. 그렇지 않으면 어쨌든 계속.

- 깨끗한 작업 디렉토리를 보장하기 위해 git 상태 확인
- **만약** git 상태가 깨끗하지 않으면 기억해두고 마지막에 사용자에게 보고하되 계속 진행.

또한 <$ARGUMENTS>를 고려 - <>사이의 내용이 추가 지침으로 간주될 수 있다면 프로세스에서 우선순위를 두세요.

시스템에서 현재 날짜시간 스탬프를 가져와 기억하세요

### 열린 작업 찾기

모드에 따라 실행:

**인자에 스프린트 ID가 제공된 경우:**

- .moonklabs/03_SPRINTS/{sprint_id}/로 이동
- 스프린트에 태스크가 있는지 확인 (T*.md 파일)
- 태스크가 존재하지 않으면:
  - 스프린트 메타 파일 확인
  - 메타가 존재하면: ### CREATE SPRINT TASKS로 이동
  - 메타가 없으면: 오류와 함께 종료 - 스프린트가 존재하지 않음
- 태스크가 존재하면: 아래 **태스크 선택** 섹션으로 계속

**인자가 없는 경우 (일반 모드):**

- 병렬 서브에이전트를 사용하여 확인:
  - 열린 일반 태스크를 위해 .moonklabs/04_GENERAL_TASKS
  - 현재 활성 스프린트를 위해 .moonklabs/00_PROJECT_MANIFEST.md
  - 메타 파일만 있는 스프린트를 위해 .moonklabs/03_SPRINTS/
- 우선순위 순서:
  1. 일반 태스크 (열린 것이 있으면)
  2. 활성 스프린트 태스크 (열린 것이 있으면)
  3. 태스크 생성이 필요한 스프린트 (발견되면) - 스프린트 순서 유지

**태스크 선택:**

- 발견된 태스크에서 완료되지 않은 하나를 선택. 스프린트 또는 일반 태스크에서 가장 낮은 ID 선택
- 이전에 시도한 태스크 건너뛰기 (OUTPUT LOG 확인)
- 적합한 태스크를 찾지 못하고 태스크가 필요한 스프린트가 없으면: 우아하게 종료

### 스프린트 태스크 생성

**ONLY EXECUTE:** 스프린트에 태스크 생성이 필요한 경우에만 **오직 실행**

- **SUBAGENT**를 사용하고 스프린트 ID를 인자로 하여 @.claude/commands/moonklabs/create_sprint_tasks.md를 포함하도록 하세요
- 완료까지 대기
- 태스크 생성 후 `### FIND OPEN WORK`로 돌아가기

### 태스크 작업

- 이전에 이 태스크를 건드린 적이 있으면 무시하고 다음 태스크로 이동
- 이전에 수정을 시도하지 않은 태스크를 찾을 수 없으면 ### EXECUTE PROJECT REVIEW로 이동
- 이미 작업이 완료되어 수정할 수 없는 태스크를 찾으면, 태스크를 닫고 태스크의 Output Log에 메모.
- **BEFORE STARTING:** 태스크를 위한 git 브랜치 생성: `git checkout -b task/<task-id>`
- **USE A SUBAGENT:** 태스크 ID를 인자로 하여 @.claude/commands/moonklabs/do_task.md를 포함하여 태스크를 실행하도록 하세요.
- **AFTER TASK COMPLETION:** test.md 명령을 사용하여 아무것도 깨지지 않았는지 확인하기 위해 테스트 실행 (@.claude/commands/moonklabs/test.md)
- 태스크 실행의 실패 시 오류의 심각도 평가:
  - 중요 오류 (테스트 중단, 보안 문제, 데이터 손실 위험): **문제 수정**
  - 비중요 오류 (린팅, 포맷팅, 사소한 문제): OUTPUT LOG에 메모하고 계속
- 성공 시 계속

### 작업 커밋

- **ONLY IF :** 테스트가 통과하고 중요한 문제가 없는 경우에만
- **USE A SUBAGENT:** 태스크 ID를 인자로, YOLO를 추가 인자로 하여 @.claude/commands/moonklabs/commit.md를 포함하도록 하세요
- 커밋 시 실패하면, 태스크의 OUTPUT LOG 에 문제를 메모하고 계속
- 성공적인 커밋 후, main으로 병합: `git checkout main && git merge task/<task-id>`
- 성공 시 계속

### 모든 열린 태스크에 대해 반복

**현재 모드에 따라:**

**스프린트별 모드:**

- 지정된 스프린트에서만 다음 태스크로 계속
- 모든 스프린트 태스크가 완료될 때까지 ### WORK ON TASK로 돌아가기
- 스프린트가 완료되면 프로젝트 리뷰로 이동

**일반 모드:**

- 일반 태스크 완료 후, 먼저 더 많은 일반 태스크 확인
- 일반 태스크가 남아있지 않으면, 활성 스프린트 태스크로 이동
- 접근 가능한 모든 태스크가 완료될 때까지 계속
- 완료되면 계속

## 프로젝트 리뷰 실행

- **서브에이전트를 사용**하고 @.claude/commands/moonklabs/project_review.md를 포함하도록 하세요
- 리뷰 결과에 따라:
  - 실패 시: 가능한 수정에 대해 생각.
  - 수정이 빠르게 완료되면, 즉시 수정하고 `## EXECUTE PROJECT REVIEW` 반복
  - 수정이 더 복잡하면 **서브에이전트를 사용**하고 필요에 따라 새로운 일반 태스크를 생성하기 위해 @.claude/commands/moonklabs/create_general_task.md를 포함하도록 하세요.
  - 이러한 수정사항을 작업하기 위해 `### FIND OPEN WORK`로 돌아가기
  - 합격 시: 계속

## 더 할 일이 있나요?

**현재 모드에 따라:**

**스프린트별 모드:**

작업이 완료되었습니다. `## CREATE SUMMARY`로 이동

**일반 모드:**

- 더 많은 열린 태스크나 스프린트를 확인하러 계속. `### FIND OPEN WORK`로 이동

## 요약 생성

- 시스템에서 현재 날짜시간 스탬프를 가져와 처음에 기억한 타임스탬프와 비교. 프로세스 지속 시간 계산.
- 다음을 포함한 요약 보고서 생성:
  - 실행된 모드 (스프린트별 또는 일반)
  - 생성된 스프린트 태스크 (해당되는 경우)
  - 완료된 태스크 수
  - 건너뛴/실패한 태스크 수
  - 총 지속 시간
  - 발생한 중요 문제
  - 현재 테스트 상태
  - 다음 권장 조치
- 지속 시간을 포함하여 리뷰 결과를 사용자에게 보고.

작업이 완료되었습니다. 감사합니다.