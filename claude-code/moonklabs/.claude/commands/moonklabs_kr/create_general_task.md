# 일반 Task 생성 - 탑 다운 실행

프로젝트 문서 표준을 따라 `.moonklabs/04_GENERAL_TASKS/`에 새로운 일반 Task를 생성합니다.

## 정확히 다음 10개 항목으로 TODO 생성

1. Task argument 파싱 및 Task ID 결정
2. 프로젝트 컨텍스트 및 문서 요구사항 로드
3. 기존 작업과 중복되지 않는지 확인
4. 구현 컨텍스트를 위한 코드베이스 조사
5. 표준 템플릿을 사용하여 Task 파일 생성
6. 적절한 컨텍스트로 Task 세부사항 작성
7. 기술 가이드 및 코드베이스 참조 추가
8. 새 Task로 project manifest 업데이트
9. 아키텍처와의 Task 정합성 검증
10. 최종 품질 점검 및 보고

## 모든 TODO 항목의 세부사항

### 1. Task argument 파싱 및 Task ID 결정

인자 형식: `<Task 제목 또는 설명>`

- 인자가 비어있으면 사용자에게 Task 세부사항 요청
- `.moonklabs/04_GENERAL_TASKS/`의 기존 Task를 검토하여 순차적 Task ID 생성
- 가장 높은 Task 번호(T###)를 찾아 1 증가
- 형식: `T###_<Task_제목_스네이크_케이스>.md`
- **IMPORTANT:** Task ID는 간격 없이 순차적이어야 함

### 2. 프로젝트 컨텍스트 및 문서 요구사항 로드

병렬 서브에이전트를 사용하여 프로젝트 컨텍스트를 읽고 이해:

- `.moonklabs/00_PROJECT_MANIFEST.md` 읽기 - 현재 프로젝트 상태 파악
- `.moonklabs/01_PROJECT_DOCS/ARCHITECTURE.md` 읽기 - 시스템 제약사항 이해
- `.moonklabs/01_PROJECT_DOCS/LONG_TERM_VISION.md` 읽기 - 미래 방향 이해
- `.moonklabs/10_STATE_OF_PROJECT/`의 최신 파일 읽기 - 현재 상태 검토
- 관련 ADR을 위해 `.moonklabs/05_ARCHITECTURE_DECISIONS/` 스캔
- **IMPORTANT:** 일반 Task는 문서화된 아키텍처와 일치해야 함

### 3. 기존 작업과 중복되지 않는지 확인

잠재적 중복을 위해 **포괄적으로 검색**:

- `.moonklabs/04_GENERAL_TASKS/`의 모든 파일 확인
- `.moonklabs/03_SPRINTS/*/T*.md`에서 스프린트 Task 검색
- 완료된 마일스톤에서 유사한 기능 찾기
- **CRITICAL:** 중복이 발견되면 중지하고 파일 참조와 함께 사용자에게 보고

### 4. 구현 컨텍스트를 위한 코드베이스 조사

Task 설명을 기반으로 병렬 서브에이전트를 사용하여:

- Task가 요구하는 것과 유사한 기존 패턴 검색
- 영향을 받을 주요 인터페이스, 클래스 또는 모듈 식별
- 코드베이스에서 유사한 구현 예제 찾기
- 관련 테스트 패턴 및 기존 테스트 파일 위치 파악
- 사용된 오류 처리 및 로깅 패턴 발견
- 기존 코드와의 통합 지점 매핑
- **DOCUMENT:** Task에 포함할 모든 발견사항 문서화

### 5. 표준 템플릿을 사용하여 Task 파일 생성

`.moonklabs/99_TEMPLATES/task_template.md`의 Task 템플릿을 기본 구조로 **사용**:

- 템플릿 구조를 정확히 복사
- 파일을 `.moonklabs/04_GENERAL_TASKS/T###_<제목>.md`에 배치
- 타임스탬프 포함: 생성 시간을 위해 `date '+%Y-%m-%d %H:%M:%S'` 실행
- **IMPORTANT:** 템플릿 구조를 정확히 따르기 - 편차 없음

### 6. 적절한 컨텍스트로 Task 세부사항 작성

Task 파일을 다음으로 채우기:

- **제목**: 명확하고 실행 가능한 Task 이름
- **컨텍스트**: 아키텍처 문서 및 프로젝트 상태 링크
- **요구사항**: 구체적이고 측정 가능한 결과
- **수락 기준**: 완료의 명확한 정의
- **종속성**: 관련 스프린트/마일스톤 참조
- **구현 노트**: 아키텍처와 일치하는 기술적 접근
- **CRITICAL:** 모든 내용은 기존 문서를 참조해야 함

### 7. 기술 가이드 및 코드베이스 참조 추가

**기술 가이드 섹션:**

- 4단계에서 발견한 주요 인터페이스 및 통합 지점
- 코드베이스의 특정 임포트 및 모듈 참조
- 따라야 할 기존 패턴 (파일 참조 포함)
- 작업할 데이터베이스 모델 또는 API 계약
- 유사한 코드에서 사용된 오류 처리 접근법
- 코드베이스에서 발견된 테스트 패턴

**구현 노트 섹션:**

- 조사를 기반으로 한 단계별 구현 접근법
- 존중해야 할 주요 아키텍처 결정 (ADR 참조)
- 수정하거나 확장할 특정 파일 및 함수
- 기존 테스트 패턴을 기반으로 한 테스트 접근법
- 관련된 경우 성능 고려사항

**IMPORTANT:** 코드 예제를 포함하지 마세요. 구조적 가이드와 파일 참조만 제공하세요.

### 8. 새 Task로 프로젝트 매니페스트 업데이트

`.moonklabs/00_PROJECT_MANIFEST.md` **업데이트**:

- "## General Tasks" 섹션에 Task 추가
- 형식: `- [ ] T###: [Task 제목] - 상태: 시작 전`
- 알파벳/숫자 순서 유지
- Task 파일 링크: `[T###](04_GENERAL_TASKS/T###_제목.md)`
- **CRITICAL:** 모든 기존 내용 보존

### 9. 아키텍처와의 Task 정합성 검증

Task 준수 **확인**:

- Task가 아키텍처 원칙과 모순되지 않는지 확인
- 구현 접근법이 확립된 패턴을 사용하는지 확인
- 종속성이 존재하고 올바른지 검증
- Task 범위가 적절한지 확인 (너무 넓거나 좁지 않은지)
- 기술 가이드가 기존 코드베이스 패턴과 일치하는지
- **중요:** 문서가 진실의 원천 - 모든 편차는 정당화 필요

### 10. 최종 품질 점검 및 보고

**품질 점검**:

- Task 파일이 템플릿을 완전히 따름
- 새로운 기술 가이드를 포함한 모든 섹션이 적절히 채워짐
- 문서 및 코드베이스에 대한 참조가 유효함
- Task ID가 순차적이고 고유함
- 매니페스트가 올바르게 업데이트됨
- 기술 가이드가 실제 파일과 패턴을 참조함
- 범위 확대나 아키텍처 위반 없음

**출력 형식**:

```markdown
✅ **생성됨**: T###_<제목>.md
📋 **유형**: 일반 Task
🎯 **목적**: [한 줄 요약]
📚 **참조**: [주요 문서 링크]
🔧 **주요 통합 지점**: [수정할 주요 파일/모듈]
🧪 **테스트 접근법**: [따를 테스트 패턴]
⏭️ **다음 단계**: Task 세부사항을 검토하고 `/do_task T###`를 실행하여 시작
```