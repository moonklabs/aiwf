# 스프린트에 태스크 추가

기존 스프린트에 새로운 태스크를 추가하고 관련 문서들을 자동으로 업데이트합니다.

## 실행 프로세스

### 1. 스프린트 정보 수집

**사용자 입력 처리:**
- 스프린트 ID 확인 (예: S01, S02, S03)
- 태스크 제목 확인
- 선택사항: 우선순위, 예상 시간, 카테고리

**스프린트 존재 확인:**
- `.aiwf/03_SPRINTS/` 디렉토리에서 해당 스프린트 폴더 검색
- 스프린트 메타데이터 파일 (`S##_M##_sprint_meta.md`) 존재 확인
- 스프린트 상태 확인 (활성, 완료된 스프린트인지)

### 2. 태스크 번호 할당

**다음 태스크 번호 결정:**
- 스프린트 폴더 내 기존 태스크 파일들 스캔 (`T##_*.md`)
- 가장 높은 태스크 번호 확인
- 다음 순차 번호 할당 (T01, T02, T03, ...)

**충돌 방지:**
- 동시 생성 시 번호 중복 방지
- 삭제된 태스크 번호 재사용하지 않음

### 3. 태스크 파일 생성

**파일명 규칙:**
```
T##_S##_M##_task_description.md
```
- T##: 태스크 번호 (T01, T02, ...)
- S##: 스프린트 번호
- M##: 마일스톤 번호
- task_description: 태스크 제목 (소문자, 언더스코어로 공백 대체)

**태스크 파일 템플릿:**
```markdown
# T##: [태스크 제목]

**스프린트**: S##
**마일스톤**: M##
**생성일**: YYYY-MM-DD HH:MM
**상태**: pending
**우선순위**: [high/medium/low]
**예상 시간**: [시간 추정]
**담당자**: [할당된 경우]

## 개요

[태스크에 대한 간단한 설명]

## 요구사항

### 기능 요구사항
- [ ] [구체적인 기능 요구사항 1]
- [ ] [구체적인 기능 요구사항 2]
- [ ] [구체적인 기능 요구사항 3]

### 비기능 요구사항
- [ ] [성능 요구사항]
- [ ] [보안 요구사항]
- [ ] [호환성 요구사항]

## 승인 기준 (Definition of Done)

- [ ] [완료 조건 1 - 구체적이고 측정 가능]
- [ ] [완료 조건 2 - 테스트 가능]
- [ ] [완료 조건 3 - 검증 가능]
- [ ] 코드 리뷰 완료
- [ ] 단위 테스트 작성 및 통과
- [ ] 문서 업데이트 완료

## 기술적 접근법

### 아키텍처
- [사용할 디자인 패턴]
- [아키텍처 결정사항 참조]
- [기존 코드베이스 패턴 활용]

### 구현 전략
- [단계별 구현 계획]
- [사용할 기술 스택]
- [외부 라이브러리 또는 API]

### 데이터 모델
- [필요한 데이터 구조]
- [데이터베이스 스키마 변경사항]
- [API 인터페이스]

## 구현 가이드라인

### 코딩 표준
- [프로젝트 코딩 스타일 가이드 준수]
- [명명 규칙]
- [주석 작성 가이드라인]

### 테스트 전략
- [ ] 단위 테스트 작성
- [ ] 통합 테스트 작성
- [ ] E2E 테스트 (필요한 경우)
- [ ] 성능 테스트 (필요한 경우)

### 보안 고려사항
- [보안 취약점 검토]
- [데이터 보호 요구사항]
- [인증/권한 처리]

## 의존성 및 제약사항

### 전제조건
- [완료되어야 할 선행 태스크]
- [필요한 리소스나 환경]
- [외부 의존성]

### 제약사항
- [기술적 제약사항]
- [시간 제약사항]
- [리소스 제약사항]

### 위험요소
- [잠재적 리스크와 완화 방안]
- [기술적 불확실성]
- [일정 지연 가능성]

## 관련 참조

### 문서
- [관련 PRD나 기술 문서]
- [아키텍처 결정 기록 (ADR)]
- [API 문서]

### 코드
- [관련 기존 코드 파일]
- [참조할 구현 예시]
- [재사용 가능한 컴포넌트]

### 외부 리소스
- [참조 문서나 튜토리얼]
- [라이브러리 문서]
- [관련 이슈나 토론]

## 진행 기록

### 작업 로그
```
[YYYY-MM-DD HH:MM] 태스크 생성
[날짜] [작업자] [수행한 작업 내용]
```

### 변경 사항
- [주요 변경사항과 사유]
- [범위 변경사항]
- [우선순위 조정]

## OUTPUT LOG

### 구현 결과
[완료 시 실제 구현 결과 기록]

### 테스트 결과
[테스트 실행 결과 및 커버리지]

### 검토 의견
[코드 리뷰 의견 및 개선사항]

### 완료 확인
- [ ] 모든 승인 기준 충족
- [ ] 테스트 통과
- [ ] 문서 업데이트 완료
- [ ] 배포 준비 완료
```

### 4. 스프린트 메타데이터 업데이트

**스프린트 메타 파일 수정:**
- `S##_M##_sprint_meta.md` 파일 열기
- "태스크 목록" 섹션에 새 태스크 추가
- 스프린트 통계 업데이트 (총 태스크 수)
- 마지막 수정일 업데이트

**업데이트 형식:**
```markdown
## 태스크 목록

### 진행 중 (In Progress)
- [기존 태스크들...]

### 대기 중 (Pending)  
- [ ] T##: [새 태스크 제목] - 상태: pending (생성일: YYYY-MM-DD)
- [기존 대기 태스크들...]

### 완료 (Completed)
- [완료된 태스크들...]

## 스프린트 통계
- **총 태스크**: [이전 수 + 1]
- **완료**: [완료된 태스크 수]
- **진행 중**: [진행 중인 태스크 수] 
- **대기 중**: [대기 중인 태스크 수 + 1]
```

### 5. 프로젝트 매니페스트 업데이트

**매니페스트 파일 수정:**
- `00_PROJECT_MANIFEST.md` 파일 열기
- "최근 활동" 섹션에 태스크 추가 활동 기록
- "프로젝트 통계" 업데이트
- "마지막 업데이트" 날짜 갱신

**활동 기록 추가:**
```markdown
## 최근 활동

### [현재 날짜]
- ➕ 새 태스크 추가: T##_S##_M## - [태스크 제목]
- 📊 스프린트 S## 태스크 수: [이전 수] → [새 수]
```

### 6. 자동 연결 및 정리

**태스크 간 연결:**
- 관련 태스크가 있는 경우 상호 참조 추가
- 의존성 관계 명시
- 순서 있는 태스크의 경우 이전/다음 태스크 링크

**Git 연동:**
- 태스크 생성과 동시에 Git 이슈 생성 옵션
- 브랜치 생성 제안
- 커밋 메시지 템플릿 제공

### 7. 확인 및 피드백

**상태 인덱스 동기화:**
```bash
# 새 태스크를 반영하여 상태 업데이트
aiwf state update
# 워크플로우 컨텍스트 확인
aiwf state show
```

**생성 결과 확인:**
```
✅ 태스크 추가 완료!

📄 생성된 파일: T03_S02_M01_implement_user_auth.md
🏃 스프린트: S02 - 사용자 관리 기능 개발
📋 태스크: T03 - 사용자 인증 시스템 구현
⏱️  상태: pending
🎯 우선순위: high
⏰ 예상 시간: 8시간

📝 다음 단계:
1. 태스크 파일을 열어 세부사항 검토 및 수정
2. /aiwf:aiwf_do_task T03 으로 작업 시작
3. 필요시 /aiwf:aiwf_update_task_status T03 in_progress 로 상태 변경

💡 유용한 명령어:
- /aiwf:aiwf_list_sprint_tasks S02 - 스프린트 태스크 목록 보기
- /aiwf:aiwf_project_status - 전체 프로젝트 현황 확인
- /aiwf:aiwf_task_dependencies T03 - 태스크 의존성 관리
```

**검증 및 정리:**
- 파일 생성 완료 확인
- 메타데이터 업데이트 확인
- 파일 권한 및 인코딩 확인
- 링크 무결성 검증

### 8. 고급 기능 (선택사항)

**템플릿 커스터마이징:**
- 스프린트별 태스크 템플릿 사용
- 태스크 유형별 맞춤형 템플릿
- 프로젝트별 표준 섹션 자동 추가

**자동 분석:**
- 태스크 복잡도 추정
- 비슷한 이전 태스크 참조 제안
- 리소스 및 시간 예측

**협업 기능:**
- 태스크 할당 기능
- 리뷰어 자동 지정
- 알림 및 업데이트 공유

## 사용법

```bash
# 기본 태스크 추가
/aiwf:add_sprint_task

# CLI 명령어 (향후 구현)
aiwf sprint-task S02 "사용자 인증 시스템 구현"
aiwf st S02 "API 성능 최적화" --priority high --time 6h
```

## 입력 매개변수

- **스프린트 ID** (필수): 태스크를 추가할 스프린트 식별자 (예: S01, S02)
- **태스크 제목** (필수): 태스크의 간단한 설명
- **우선순위** (선택): high, medium, low (기본값: medium)
- **예상 시간** (선택): 시간 단위로 예상 작업 시간
- **카테고리** (선택): 태스크 유형 분류

## 주의사항

- 이미 완료된 스프린트에는 태스크 추가 불가
- 태스크 제목은 고유하지 않아도 되지만 명확해야 함
- 생성된 태스크는 바로 편집하여 세부사항을 추가할 것을 권장
- 대규모 태스크는 여러 개의 작은 태스크로 분할 고려
- 스프린트 용량과 팀 리소스를 고려하여 적절한 수의 태스크 추가

이 명령어는 애자일 개발 프로세스를 지원하며, 체계적인 태스크 관리와 프로젝트 추적을 가능하게 합니다.