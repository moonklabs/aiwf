# YOLO 모드 - 적응적 프로젝트 관리 시스템

이 모드는 마일스톤 기반의 지능적이고 적응적인 프로젝트 관리를 수행합니다.
사용자 상호작용 없이 실행되지만, 중요한 단계에서는 알림과 리뷰를 제공합니다.
의심스러울 때는 최선의 해결책에 대해 **RESEARCH**하고 **ULTRATHINK**하세요.

**핵심 원칙:**
- 마일스톤 변경 시 체계적인 계획 수립
- 한 번에 하나의 스프린트만 생성 (적응적 계획)
- 완료된 작업을 다음 계획에 반영
- 중요 단계마다 커밋/푸시/리뷰

우선순위는 지속 가능하고 품질 높은 작업 완료입니다.

## 모드 선택

<$ARGUMENTS> 확인:

- 스프린트 ID가 제공된 경우 (예: S03): 해당 스프린트에서만 작업
- `sprint-all`이 제공된 경우: 완료될 때까지 모든 스프린트를 순차적으로 실행
- `milestone-all`이 제공된 경우: 완료될 때까지 모든 마일스톤(모든 스프린트 포함) 실행
- `worktree`가 제공된 경우: 워크트리 모드 사용 (브랜치 생성 없이 직접 푸시)
- 비어있는 경우: 일반 태스크를 먼저 작업한 후 활성 스프린트 태스크 작업

**사용자에게 모드 보고!**

## 안전 가이드라인

- 중요한 파일(.env, alembic 마이그레이션, 프로덕션 설정)을 **절대** 수정하지 마세요
- 데이터베이스 스키마 변경이 발생하면 **중단**하세요
- 5개 이상의 파일을 삭제해야 하는 경우 **중단**하세요
- 변경 후 테스트가 실패하면 **중단**하세요
- 태스크 구현 후 **항상** 테스트를 실행하세요

## 정확한 프로세스를 따르세요

이 프로세스를 고수하고 **정확히** 따라야 합니다

## 초기화 및 상태 확인

시작하기 전에:

1. **시간 기록**: 시스템에서 현재 datetime 스탬프를 가져와서 기억
2. **테스트 기준선**: test.md 명령(@.claude/commands/aiwf/aiwf_test.md)을 사용하여 깨끗한 기준선 확인
   - **만약** 실패율이 10%를 초과하면 수정 가능성 평가 후 진행
3. **Git 상태 확인**: 깨끗한 작업 디렉토리 보장
   - **만약** git 상태가 깨끗하지 않다면 기록 후 진행
4. **마일스톤 변경 감지**: 이전 실행과 비교하여 마일스톤 변경 확인
5. **인수 분석**: <$ARGUMENTS> 고려하여 실행 모드 결정

## 마일스톤 변경 감지 및 처리

**마일스톤 변경이 감지된 경우:**

1. **현재 작업 정리**:
   - 진행 중인 모든 작업 커밋 및 푸시
   - 현재 상태 저장

2. **마일스톤 계획 수립**:
   - **서브에이전트 사용**하여 새 마일스톤 분석을 위해 @.claude/commands/aiwf/aiwf_analyze_milestone.md 포함
   - 전체 마일스톤 구조 및 목표 파악
   - 고수준 계획 수립

3. **첫 스프린트 생성**:
   - **중요**: 첫 번째 스프린트만 생성 (전체 스프린트 미리 생성 금지)
   - **서브에이전트 사용**하여 첫 스프린트 생성을 위해 @.claude/commands/aiwf/aiwf_create_sprint_tasks.md 포함

4. **사용자 알림 및 리뷰**:
   - 마일스톤 변경 및 계획 완료 알림
   - 전체 커밋 및 푸시
   - 리뷰 요청 및 승인 대기

5. **실행 시작**: `### 열린 작업 찾기`로 이동

### 열린 작업 찾기

모드에 따라 실행:

**인수에 스프린트 ID가 제공된 경우:**

- .aiwf/03_SPRINTS/{sprint_id}/로 이동
- 스프린트에 태스크가 있는지 확인 (T\*.md 파일)
- 태스크가 존재하지 않는 경우:
  - 스프린트 메타 파일 확인
  - 메타가 존재하면: ### 스프린트 태스크 생성으로 이동
  - 메타가 없으면: 오류로 종료 - 스프린트가 존재하지 않음
- 태스크가 존재하면: 아래 **태스크 선택** 섹션으로 계속

**인수에 `sprint-all`이 있는 경우:**

- .aiwf/03_SPRINTS/ 디렉토리의 모든 스프린트 스캔
- 모든 스프린트의 순서 목록 생성 (S01, S02, S03, ...)
- 각 스프린트를 순서대로:
  - 스프린트에 태스크가 있는지 확인, 없으면 생성
  - 다음으로 이동하기 전에 현재 스프린트의 모든 태스크 실행
  - 모든 태스크가 완료되면 스프린트를 완료로 표시
- 모든 스프린트가 100% 완료될 때까지 계속
- 우선순위: 다음을 시작하기 전에 현재 스프린트를 완전히 완료

**인수에 `milestone-all`이 있는 경우:**

- .aiwf/01_MILESTONES/ 디렉토리의 모든 마일스톤 스캔
- 각 마일스톤을 순서대로:
  - 이 마일스톤과 관련된 모든 스프린트 식별
  - 현재 마일스톤과 관련된 모든 스프린트 실행
  - 각 스프린트의 모든 태스크 실행
  - 관련된 모든 작업이 완료되면 마일스톤을 완료로 표시
- 모든 마일스톤이 100% 완료될 때까지 계속
- 우선순위: 다음을 시작하기 전에 현재 마일스톤을 완전히 완료

**인수가 없는 경우 (일반 모드):**

- 병렬 서브에이전트를 사용하여 확인:
  - 열린 일반 태스크를 위한 .aiwf/04_GENERAL_TASKS
  - 현재 활성 스프린트를 위한 .aiwf/00_PROJECT_MANIFEST.md
  - 메타 파일만 있는 스프린트를 위한 .aiwf/03_SPRINTS/
- 우선순위 순서:
  1. 일반 태스크 (열린 것이 있다면)
  2. 활성 스프린트 태스크 (열린 것이 있다면)
  3. 태스크 생성이 필요한 스프린트 (발견되면) - 스프린트 순서 유지

**태스크 선택:**

- 발견된 태스크에서 완료되지 않은 하나를 선택. 스프린트나 일반 태스크에서 가장 낮은 ID를 선택
- 이전에 시도한 태스크는 건너뛰기 (OUTPUT LOG 확인)
- 적합한 태스크를 찾지 못하고 스프린트가 태스크를 필요로 하지 않으면: 우아하게 종료

### 적응적 스프린트 태스크 생성

**스프린트 완료 후 다음 스프린트 생성 프로세스:**

1. **현재 코드베이스 분석**:
   - 완료된 작업들의 실제 구현 결과 분석
   - 변경된 아키텍처나 설계 결정사항 파악
   - 예상과 다른 구현 결과 식별

2. **다음 스프린트 계획 조정**:
   - 실제 구현 결과를 반영하여 다음 스프린트 계획 수정
   - 새로운 의존성이나 전제조건 고려
   - 우선순위 재조정

3. **단일 스프린트 생성**:
   - **중요**: 다음 하나의 스프린트만 생성
   - **서브에이전트 사용**하여 조정된 계획으로 @.claude/commands/aiwf/aiwf_create_sprint_tasks.md 포함
   - 생성 완료 후 `### 열린 작업 찾기`로 이동

**초기 스프린트 생성 (마일스톤 시작 시):**
- **오직** 스프린트가 태스크 생성을 필요로 하는 경우에만 실행
- **서브에이전트 사용**하여 스프린트 ID를 인수로 하여 @.claude/commands/aiwf/aiwf_create_sprint_tasks.md 포함
- 완료 후 `### 열린 작업 찾기`로 이동

### 태스크 작업

- 이전에 이 태스크를 건드린 적이 있다면 무시하고 다음 태스크로 이동
- 이전에 수정을 시도하지 않은 태스크를 찾을 수 없다면 ### 프로젝트 리뷰 실행으로 이동
- 작업이 이미 완료되어 수정할 수 없는 태스크를 발견하면, 태스크를 닫고 태스크의 Output Log에 기록.
- **시작하기 전에**:
  - **만약** 인수에 `worktree`가 없다면: 태스크를 위한 git 브랜치 생성: `git checkout -b task/<task-id>`
  - **만약** 인수에 `worktree`가 있다면: 브랜치 생성 건너뛰기 (워크트리 모드)
- **GitHub 이슈 생성 (선택사항):**
  - 태스크에 `github_issue` 필드가 없는 경우
  - 서브에이전트를 사용하여 이슈 생성을 위해 @.claude/commands/aiwf/aiwf_issue_create.md 포함
- **서브에이전트 사용**하여 태스크를 실행하기 위해 태스크 ID를 인수로 하여 @.claude/commands/aiwf/aiwf_do_task.md를 포함하도록 함.
- **태스크 완료 후**: test.md 명령(@.claude/commands/aiwf/aiwf_test.md)을 사용하여 아무것도 깨지지 않았는지 확인하기 위해 테스트 실행
- 태스크 실행에서 실패 시 오류의 심각성 평가:
  - 치명적 오류 (테스트 중단, 보안 문제, 데이터 손실 위험): **문제 수정**
  - 비치명적 오류 (린팅, 포맷팅, 사소한 문제): OUTPUT LOG에 기록하고 계속
- 성공 시 계속 진행

### 작업 커밋 및 체크포인트 관리

**일반 태스크 커밋:**
- **오직** 테스트가 통과하고 치명적 문제가 없는 경우에만
- **서브에이전트 사용**하여 태스크 ID를 인수로 하고 YOLO를 추가 인수로 하여 @.claude/commands/aiwf/aiwf_commit.md 포함
- 커밋 실패 시 OUTPUT LOG에 문제 기록 후 계속
- 성공적인 커밋 후:
  - **만약** 인수에 `worktree`가 없다면: main으로 병합: `git checkout main && git merge task/<task-id>`
  - **만약** 인수에 `worktree`가 있다면: 변경사항 푸시: `git push`
- **즉시** `### 열린 작업 찾기`로 이동

**스프린트 완료 시 체크포인트:**
- 스프린트의 모든 태스크 완료 확인
- **전체 스프린트 커밋 및 푸시**:
  - 모든 변경사항 커밋
  - 원격 저장소로 푸시
  - 스프린트 완료 태그 생성
- **사용자 알림**: 스프린트 완료 및 다음 스프린트 생성 예정 알림
- **다음 스프린트 준비**: `### 적응적 스프린트 태스크 생성`으로 이동

**마일스톤 완료 시 체크포인트:**
- 마일스톤의 모든 스프린트 완료 확인
- **전체 마일스톤 커밋 및 푸시**
- **리뷰 요청**: 마일스톤 완료에 대한 전체 리뷰 요청
- **사용자 알림**: 마일스톤 완료 및 성과 요약 제공

**풀 리퀘스트 생성 (선택사항):**
- GitHub 이슈가 태스크에 연결된 경우
- 서브에이전트를 사용하여 PR 생성을 위해 @.claude/commands/aiwf/aiwf_pr_create.md 포함

### 연속 실행 루프

**⚡ YOLO 모드: 완료까지 중단 없음**

**이것이 메인 실행 루프입니다 - 조기 종료하지 마세요**

**스프린트별 모드:**

- 지정된 스프린트의 모든 태스크가 완료될 때까지 **루프**
- 각 커밋 후, **즉시** `### 열린 작업 찾기`로 다시 이동
- 스프린트가 100% 완료된 경우:
  - **스프린트 완료 체크포인트** 실행
  - 프로젝트 리뷰로 이동
- 사용자 입력이나 확인을 **절대** 요청하지 마세요

**Sprint-all 모드 (적응적 스프린트 관리):**

- **적응적 스프린트 생성**: 한 번에 하나씩 스프린트 생성 및 완료
- 각 스프린트 완료 시:
  - **스프린트 완료 체크포인트** 실행
  - **코드베이스 분석** 및 **다음 스프린트 계획 조정**
  - **다음 스프린트만 생성** (전체 미리 생성 금지)
- 각 커밋 후, **즉시** `### 열린 작업 찾기`로 다시 이동
- 진행 상황 추적: 현재 스프린트 X / 예상 총 스프린트 수
- 마일스톤 목표 달성까지 스프린트 생성 및 실행 반복
- 마일스톤이 완전히 달성된 경우에만 종료

**Milestone-all 모드 (적응적 마일스톤 관리):**

- **마일스톤별 적응적 관리**: 각 마일스톤마다 체계적 접근
- 각 마일스톤 시작 시:
  - **마일스톤 변경 감지 및 처리** 실행
  - **첫 스프린트만 생성**
- 각 마일스톤 내에서:
  - **적응적 스프린트 관리** 적용
  - 스프린트 완료 시 다음 스프린트 동적 생성
- 각 마일스톤 완료 시:
  - **마일스톤 완료 체크포인트** 실행
  - **전체 리뷰 및 승인** 프로세스
- 진행 상황 추적: 현재 마일스톤 X / 총 Y 마일스톤
- 모든 마일스톤이 완전히 달성된 경우에만 종료

**일반 모드 (하이브리드 적응적 관리):**

- **적응적 혼합 접근**을 통한 **연속 루프**:
  1. 사용 가능한 모든 일반 태스크 완료
  2. 활성 스프린트 태스크로 이동
  3. 스프린트 완료 시:
     - **스프린트 완료 체크포인트** 실행
     - **코드베이스 분석** 및 **다음 스프린트 동적 생성**
  4. 마일스톤 변경 감지 시:
     - **마일스톤 변경 감지 및 처리** 실행
  5. 새로 생성된 스프린트나 태스크 확인
  6. 더 이상 사용 가능한 작업이 없을 때까지 반복
- 각 커밋 후, **즉시** `### 열린 작업 찾기`로 다시 이동
- **지능적 종료 조건**: 현재 마일스톤 목표 달성 또는 절대적으로 작업이 남아있지 않은 경우에만 종료

**중단 조건 (모든 것이 참인 경우에만 중단):**

- 대상 범위에 보류 중인 태스크 없음
- 자동 수정할 수 있는 태스크 없음
- 태스크 생성이 필요한 스프린트 없음
- 프로젝트 리뷰가 새 태스크를 생성하지 않고 통과

## 프로젝트 리뷰 실행

- **서브에이전트 사용**하여 @.claude/commands/aiwf/aiwf_project_review.md를 포함하도록 함
- 리뷰 결과에 따라:
  - 실패 시: 가능한 수정에 대해 생각.
  - 수정이 빠르게 완료되면, 즉시 수정하고 `## 프로젝트 리뷰 실행` 반복
  - 수정이 더 복잡하면 **서브에이전트 사용**하여 필요에 따라 새 일반 태스크를 생성하기 위해 @.claude/commands/aiwf/aiwf_create_general_task.md를 포함하도록 함.
  - 이러한 수정 작업을 위해 `### 열린 작업 찾기`로 다시 이동
  - 통과 시: 계속 진행

## 계속 확인

**⚡ 필수 계속 로직**

**남은 작업 확인:**

- 현재 범위에서 보류 중인 태스크 스캔
- 프로젝트 리뷰가 새 태스크를 생성했는지 확인
- 태스크 생성이 필요한 스프린트가 있는지 확인

**결정 매트릭스:**

**스프린트별 모드:**

- **만약** 스프린트에 보류 중인 태스크가 있다면 → `### 열린 작업 찾기`로 다시 이동
- **만약** 스프린트가 100% 완료되었다면:
  - **스프린트 완료 체크포인트** 실행
  - `## 요약 생성`으로 이동

**Sprint-all 모드 (적응적):**

- **만약** 현재 스프린트에 보류 중인 태스크가 있다면 → `### 열린 작업 찾기`로 다시 이동
- **만약** 현재 스프린트가 100% 완료되었다면:
  - **스프린트 완료 체크포인트** 실행
  - **코드베이스 분석 및 다음 스프린트 계획**
  - **다음 스프린트 생성** 후 `### 열린 작업 찾기`로 이동
- **만약** 마일스톤 목표가 달성되었다면 → `## 요약 생성`으로 이동
- **만약** 마일스톤 변경이 감지되었다면 → `## 마일스톤 변경 감지 및 처리`로 이동

**Milestone-all 모드 (적응적):**

- **만약** 현재 마일스톤에 불완전한 스프린트가 있다면 → `### 열린 작업 찾기`로 다시 이동
- **만약** 현재 마일스톤이 100% 완료되었다면:
  - **마일스톤 완료 체크포인트** 실행
  - **다음 마일스톤 시작** 또는 `## 요약 생성`으로 이동
- **만약** 마일스톤 변경이 감지되었다면 → `## 마일스톤 변경 감지 및 처리`로 이동
- **만약** 모든 마일스톤이 100% 완료되었다면 → `## 요약 생성`으로 이동

**일반 모드 (하이브리드 적응적):**

- **만약** 어떤 일반 태스크든 보류 중이라면 → `### 열린 작업 찾기`로 다시 이동
- **만약** 어떤 스프린트 태스크든 보류 중이라면 → `### 열린 작업 찾기`로 다시 이동
- **만약** 스프린트가 100% 완료되었다면:
  - **스프린트 완료 체크포인트** 실행
  - **다음 스프린트 동적 생성** 후 `### 열린 작업 찾기`로 이동
- **만약** 마일스톤 변경이 감지되었다면 → `## 마일스톤 변경 감지 및 처리`로 이동
- **만약** 프로젝트 리뷰가 실패하고 새 태스크를 생성했다면 → `### 열린 작업 찾기`로 다시 이동
- **오직** 현재 마일스톤 목표 달성 또는 절대적으로 작업이 남아있지 않은 경우에만 → `## 요약 생성`으로 이동

**🚨 치명적: 작업이 남아있지 않다고 100% 확신하지 않는 한 요약으로 이동하지 마세요**

## 요약 생성

- 시스템에서 현재 datetime 스탬프를 가져와서 처음에 기억한 타임스탬프와 비교. 프로세스 지속시간 계산.

### 프로젝트 상태 보고서 생성

**프로젝트 상태 데이터 수집:**

- 마일스톤 완료 상태를 위해 `.aiwf/01_MILESTONES/` 스캔
- 모든 스프린트 상태와 태스크 완료를 위해 `.aiwf/03_SPRINTS/` 스캔
- 일반 태스크 완료를 위해 `.aiwf/04_GENERAL_TASKS/` 스캔
- 각 카테고리에 대해 완료된 vs 전체 태스크 계산

**시각적 진행 상황 보고서 생성:**

```
=== MOONKLABS 프로젝트 상태 보고서 ===

🎯 마일스톤 진행 상황:
[▓▓▓▓▓▓▓░░░] 70% (10개 중 7개 완료)
M01: ✅ 설정 및 아키텍처
M02: ✅ 핵심 기능
M03: ✅ 인증
M04: 🔄 진행 중 - API 개발
M05: ⏳ 대기 중 - 프론트엔드 통합

📊 스프린트 진행 상황:
[▓▓▓▓▓▓░░░░] 60% (5개 스프린트 중 3개 완료)
S01: ✅ 완료 (12/12 태스크)
S02: ✅ 완료 (8/8 태스크)
S03: 🔄 활성 (9개 태스크 중 5개 완료)
S04: ⏳ 계획됨 (0/0 태스크)
S05: ⏳ 계획됨 (0/0 태스크)

⚡ 일반 태스크:
[▓▓▓▓▓▓▓▓░░] 80% (20개 중 16개 완료)

📈 전체 프로젝트 상태:
[▓▓▓▓▓▓▓░░░] 73% 완료
```

**다음을 포함한 적응적 관리 요약 보고서 생성:**

**실행 모드 및 전략:**
- 실행된 모드 (스프린트별, Sprint-all 적응적, Milestone-all 적응적, 또는 하이브리드 일반)
- 적용된 적응적 관리 전략
- 마일스톤 변경 감지 및 처리 횟수

**스프린트 및 태스크 관리:**
- 동적으로 생성된 스프린트 수 및 상세 내역
- 이 세션에서 완료된 태스크 수
- 이 세션에서 건너뛰거나 실패한 태스크 수
- 코드베이스 분석 및 계획 조정 횟수

**체크포인트 및 리뷰:**
- 스프린트 완료 체크포인트 실행 횟수
- 마일스톤 완료 체크포인트 실행 횟수
- 커밋/푸시 작업 횟수
- 리뷰 요청 및 승인 상태

**성과 지표:**
- YOLO 세션의 총 지속시간
- 현재 프로젝트 완료 백분율
- 완료된 스프린트 수 및 상세 내역
- 달성된 마일스톤 수 및 상세 내역
- 적응적 계획 조정으로 인한 효율성 개선 사례

**문제 및 해결:**
- 발생한 치명적 문제들
- 현재 테스트 상태
- 적응적 계획 조정으로 해결된 문제들

**미래 계획:**
- 다음 권장 조치
- 다음 세션을 위한 상위 3개 우선순위 항목
- 예상 다음 스프린트 방향성
- 적응적 관리 개선 제안사항

**다음을 포함하여 사용자에게 완전한 상태 보고:**

- 시각적 진행 상황 그래프
- 세션 요약
- 프로젝트 상태 개요
- 권장 다음 단계

작업이 완료되었습니다. 감사합니다.
